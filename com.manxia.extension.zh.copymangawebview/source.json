{
  "metadata": {
    "id": "com.manxia.extension.zh.copymangawebview",
    "name": "拷贝漫画",
    "type": "manga",
    "version": "3.1.0",
    "language": "zh-CN",
    "baseUrl": "https://api.mangacopy.com",
    "description": "拷贝漫画 - 日漫为主，API版本",
    "author": "ManXia Team",
    "nsfw": true,
    "tags": ["chinese", "api", "popular"],
    "alternativeUrls": {
      "mangacopy": "https://api.mangacopy.com",
      "copy20": "https://mapi.copy20.com",
      "copy2000": "https://mapi.copy2000.site",
      "2025copy": "https://api.2025copy.com",
      "hotmanga": "https://mapi.hotmangasd.com",
      "hotmanga2": "https://api.manga2025.com",
      "hotmanga3": "https://mapi.hotmangasf.com",
      "hotmanga4": "https://mapi.hotmangasg.com"
    },
    "Internet": true,
    "notes": "如果无法获取漫画列表，请尝试切换API域名。"
  },

  "capabilities": {
    "urlResolver": true,
    "pagination": true,
    "errorRetry": true,
    "sessionManagement": false,
    "loginSupport": false
  },

  "network": {
    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/114.0",
    "headers": {
      "Accept": "application/json",
      "Accept-Language": "en-US,en;q=0.9,zh-TW;q=0.8,zh;q=0.7",
      "Origin": "https://2025copy.com",
      "Version": "2025.11.21",
      "Region": "0",
      "Webp": "0"
    },
    "timeout": 30000,
    "retryCount": 3,
    "retryDelay": 1000
  },

  "searchConfig": {
    "types": [
      {
        "id": "search",
        "label": "关键词",
        "placeholder": "输入漫画名称",
        "description": "搜索漫画",
        "isDefault": true
      },
      {
        "id": "searchById",
        "label": "作品ID",
        "placeholder": "输入作品path_word，如：yurijoshi",
        "description": "直接访问作品详情页"
      }
    ]
  },

  "settings": {
    "domain": {
      "type": "select",
      "name": "API域名",
      "description": "选择可用的API域名（如果某个域名不可用请尝试其他）",
      "default": "https://api.manga2025.com",
      "options": [
        {"value": "https://api.manga2025.com", "label": "api.manga2025.com (推荐)"},
        {"value": "https://mapi.hotmangasd.com", "label": "mapi.hotmangasd.com (熱辣漫畫)"},
        {"value": "https://mapi.hotmangasf.com", "label": "mapi.hotmangasf.com (熱辣線路3)"},
        {"value": "https://mapi.hotmangasg.com", "label": "mapi.hotmangasg.com (熱辣線路4)"},
        {"value": "https://api.mangacopy.com", "label": "api.mangacopy.com (國際服)"},
        {"value": "https://mapi.copy20.com", "label": "mapi.copy20.com (大陸專線1)"},
        {"value": "https://mapi.copy2000.site", "label": "mapi.copy2000.site (大陸專線2)"},
        {"value": "https://api.2025copy.com", "label": "api.2025copy.com (拷貝新站)"}
      ]
    },
    "filterOrdering": {
      "type": "select",
      "name": "排序",
      "description": "筛选排序方式",
      "default": "-datetime_updated",
      "options": [
        {"value": "-datetime_updated", "label": "按时间-从新到旧"},
        {"value": "datetime_updated", "label": "按时间-从旧到新"},
        {"value": "-popular", "label": "按热度-从高到低"},
        {"value": "popular", "label": "按热度-从低到高"}
      ]
    },
    "filterRegion": {
      "type": "select",
      "name": "地区",
      "description": "筛选地区",
      "default": "",
      "options": [
        {"value": "", "label": "全部"},
        {"value": "japan", "label": "日漫"},
        {"value": "korea", "label": "韩漫"},
        {"value": "west", "label": "美漫"},
        {"value": "finish", "label": "已完结"}
      ]
    },
    "filterTheme": {
      "type": "select",
      "name": "题材",
      "description": "筛选题材",
      "default": "",
      "options": [
        {"value": "", "label": "全部"},
        {"value": "aiqing", "label": "愛情"},
        {"value": "huanlexiang", "label": "歡樂向"},
        {"value": "maoxian", "label": "冒險"},
        {"value": "qihuan", "label": "奇幻"},
        {"value": "baihe", "label": "百合"},
        {"value": "xiaoyuan", "label": "校园"},
        {"value": "kehuan", "label": "科幻"},
        {"value": "dongfang", "label": "東方"},
        {"value": "danmei", "label": "耽美"},
        {"value": "shenghuo", "label": "生活"},
        {"value": "gedou", "label": "格鬥"},
        {"value": "qingxiaoshuo", "label": "轻小说"},
        {"value": "qita", "label": "其他"},
        {"value": "xuanyi", "label": "悬疑"},
        {"value": "teenslove", "label": "TL"},
        {"value": "mengxi", "label": "萌系"},
        {"value": "shengui", "label": "神鬼"},
        {"value": "zhichang", "label": "职场"},
        {"value": "zhiyu", "label": "治愈"},
        {"value": "jiecao", "label": "节操"},
        {"value": "sige", "label": "四格"},
        {"value": "changtiao", "label": "長條"},
        {"value": "jianniang", "label": "舰娘"},
        {"value": "gaoxiao", "label": "搞笑"},
        {"value": "jingji", "label": "竞技"},
        {"value": "weiniang", "label": "伪娘"},
        {"value": "mohuan", "label": "魔幻"},
        {"value": "rexue", "label": "热血"},
        {"value": "xingzhuanhuan", "label": "性转换"},
        {"value": "meishi", "label": "美食"},
        {"value": "lizhi", "label": "励志"},
        {"value": "COLOR", "label": "彩色"},
        {"value": "hougong", "label": "後宮"},
        {"value": "zhentan", "label": "侦探"},
        {"value": "jingsong", "label": "惊悚"},
        {"value": "aa", "label": "AA"},
        {"value": "yinyuewudao", "label": "音乐舞蹈"},
        {"value": "yishijie", "label": "异世界"},
        {"value": "zhanzheng", "label": "战争"},
        {"value": "lishi", "label": "历史"},
        {"value": "jizhan", "label": "机战"},
        {"value": "dushi", "label": "都市"},
        {"value": "chuanyue", "label": "穿越"},
        {"value": "chongsheng", "label": "重生"},
        {"value": "kongbu", "label": "恐怖"},
        {"value": "shengcun", "label": "生存"},
        {"value": "wuxia", "label": "武侠"},
        {"value": "zhaixi", "label": "宅系"},
        {"value": "zhuansheng", "label": "转生"},
        {"value": "fate", "label": "FATE"},
        {"value": "Uncensored", "label": "無修正"},
        {"value": "xianxia", "label": "仙侠"},
        {"value": "loveLive", "label": "LoveLive"}
      ]
    }
  },

  "workflows": {
    "popular": {
      "description": "获取热门漫画",
      "pagination": {
        "type": "offset",
        "pageSize": 21,
        "startOffset": 0
      },
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/recs",
          "params": {
            "pos": "3200102",
            "limit": "21",
            "offset": "{{offset}}"
          },
          "extract": {
            "type": "json",
            "path": "results.list",
            "fields": {
              "id": "comic.path_word",
              "title": "comic.name",
              "cover": "comic.cover",
              "author": "comic.author[0].name"
            }
          }
        }
      ]
    },

    "latest": {
      "description": "获取最新更新",
      "pagination": {
        "type": "offset",
        "pageSize": 21,
        "startOffset": 0
      },
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/update/newest",
          "params": {
            "limit": "21",
            "offset": "{{offset}}"
          },
          "extract": {
            "type": "json",
            "path": "results.list",
            "fields": {
              "id": "comic.path_word",
              "title": "comic.name",
              "cover": "comic.cover",
              "author": "comic.author[0].name"
            }
          }
        }
      ]
    },

    "search": {
      "description": "搜索漫画",
      "pagination": {
        "type": "offset",
        "pageSize": 21,
        "startOffset": 0
      },
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/search/comic",
          "params": {
            "limit": "21",
            "offset": "{{offset}}",
            "q": "{{query}}",
            "_update": "true"
          },
          "extract": {
            "type": "json",
            "path": "results.list",
            "fields": {
              "id": "path_word",
              "title": "name",
              "cover": "cover",
              "author": "author[0].name"
            }
          }
        }
      ]
    },

    "searchById": {
      "description": "通过作品ID直接访问",
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comic2/{{query}}",
          "extract": {
            "type": "json",
            "path": "results",
            "single": true,
            "fields": {
              "id": "comic.path_word",
              "title": "comic.name",
              "cover": "comic.cover",
              "author": "comic.author[0].name",
              "status": "comic.status.display",
              "description": "comic.brief",
              "genres": "comic.theme[*].name",
              "updateTime": "comic.datetime_updated"
            }
          }
        }
      ]
    },

    "filter": {
      "description": "筛选漫画（支持排序、地区、题材组合）",
      "pagination": {
        "type": "offset",
        "pageSize": 21,
        "startOffset": 0
      },
      "defaults": {
        "filterOrdering": "-datetime_updated",
        "filterRegion": "",
        "filterTheme": ""
      },
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comics",
          "params": {
            "limit": "21",
            "offset": "{{offset}}",
            "ordering": "{{filterOrdering}}",
            "top": "{{filterRegion}}",
            "theme": "{{filterTheme}}",
            "_update": "true"
          },
          "extract": {
            "type": "json",
            "path": "results.list",
            "fields": {
              "id": "path_word",
              "title": "name",
              "cover": "cover",
              "author": "author[0].name"
            }
          }
        }
      ]
    },

    "getMangaDetail": {
      "description": "获取漫画详情",
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comic2/{{mangaId}}",
          "extract": {
            "type": "json",
            "path": "results",
            "single": true,
            "fields": {
              "id": "comic.path_word",
              "title": "comic.name",
              "cover": "comic.cover",
              "author": "comic.author[0].name",
              "status": "comic.status.display",
              "description": "comic.brief",
              "genres": "comic.theme[*].name",
              "updateTime": "comic.datetime_updated",
              "region": "comic.region.display"
            }
          }
        }
      ]
    },

    "getMangaDetailWithChapters": {
      "description": "一次性获取漫画详情和章节列表",
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comic2/{{mangaId}}",
          "extract": {
            "type": "json",
            "path": "results",
            "single": true,
            "fields": {
              "id": "comic.path_word",
              "title": "comic.name",
              "cover": "comic.cover",
              "author": "comic.author[0].name",
              "status": "comic.status.display",
              "description": "comic.brief",
              "genres": "comic.theme[*].name",
              "updateTime": "comic.datetime_updated"
            }
          }
        }
      ]
    },

    "getChapterList": {
      "description": "获取章节列表",
      "pagination": {
        "type": "offset",
        "pageSize": 100,
        "startOffset": 0
      },
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comic/{{mangaId}}/group/default/chapters",
          "params": {
            "limit": "100",
            "offset": "{{offset}}",
            "_update": "true"
          },
          "extract": {
            "type": "json",
            "path": "results.list",
            "fields": {
              "id": "uuid",
              "title": "name",
              "index": "index",
              "dateUpload": "datetime_created"
            }
          }
        }
      ]
    },

    "getPageList": {
      "description": "获取章节页面列表",
      "actions": [
        {
          "type": "api",
          "method": "GET",
          "url": "{{domain}}/api/v3/comic/{{mangaId}}/chapter/{{chapterId}}",
          "extract": {
            "type": "json",
            "path": "results.chapter.contents",
            "fields": {
              "imageUrl": "url"
            }
          }
        }
      ]
    },

    "getImageUrl": {
      "description": "获取图片URL",
      "actions": [
        {
          "type": "return",
          "value": "{{imageUrl}}"
        }
      ]
    }
  },

  "tabs": [
    {
      "id": "popular",
      "type": "popular",
      "name": "热门",
      "enabled": true,
      "order": 0,
      "requiresLogin": false
    },
    {
      "id": "latest",
      "type": "latest",
      "name": "最新",
      "enabled": false,
      "order": 1,
      "requiresLogin": false
    },
    {
      "id": "filter",
      "type": "filter",
      "name": "筛选",
      "enabled": true,
      "order": 2,
      "requiresLogin": false,
      "filterConfig": {
        "title": "筛选漫画",
        "description": "选择筛选条件",
        "groups": [
          {
            "id": "filterOrdering",
            "title": "排序",
            "defaultValue": "-datetime_updated",
            "options": [
              {"value": "-datetime_updated", "label": "按时间-从新到旧"},
              {"value": "datetime_updated", "label": "按时间-从旧到新"},
              {"value": "-popular", "label": "按热度-从高到低"},
              {"value": "popular", "label": "按热度-从低到高"}
            ]
          },
          {
            "id": "filterRegion",
            "title": "地区",
            "defaultValue": "",
            "options": [
              {"value": "", "label": "全部"},
              {"value": "japan", "label": "日漫"},
              {"value": "korea", "label": "韩漫"},
              {"value": "west", "label": "美漫"},
              {"value": "finish", "label": "已完结"}
            ]
          },
          {
            "id": "filterTheme",
            "title": "题材",
            "defaultValue": "",
            "placeholder": "选择题材分类"
          }
        ]
      }
    }
  ],

  "filters": {
    "filterOrdering": {
      "type": "select",
      "name": "排序",
      "default": "-datetime_updated",
      "options": [
        {"value": "-datetime_updated", "label": "按时间-从新到旧"},
        {"value": "datetime_updated", "label": "按时间-从旧到新"},
        {"value": "-popular", "label": "按热度-从高到低"},
        {"value": "popular", "label": "按热度-从低到高"}
      ]
    },
    "filterRegion": {
      "type": "select",
      "name": "地区",
      "default": "",
      "options": [
        {"value": "", "label": "全部"},
        {"value": "japan", "label": "日漫"},
        {"value": "korea", "label": "韩漫"},
        {"value": "west", "label": "美漫"},
        {"value": "finish", "label": "已完结"}
      ]
    },
    "filterTheme": {
      "type": "select",
      "name": "题材",
      "default": "",
      "options": [
        {"value": "", "label": "全部"},
        {"value": "aiqing", "label": "愛情"},
        {"value": "huanlexiang", "label": "歡樂向"},
        {"value": "maoxian", "label": "冒險"},
        {"value": "qihuan", "label": "奇幻"},
        {"value": "baihe", "label": "百合"},
        {"value": "xiaoyuan", "label": "校园"},
        {"value": "kehuan", "label": "科幻"},
        {"value": "dongfang", "label": "東方"},
        {"value": "danmei", "label": "耽美"},
        {"value": "shenghuo", "label": "生活"},
        {"value": "gedou", "label": "格鬥"},
        {"value": "qingxiaoshuo", "label": "轻小说"},
        {"value": "qita", "label": "其他"},
        {"value": "xuanyi", "label": "悬疑"},
        {"value": "teenslove", "label": "TL"},
        {"value": "mengxi", "label": "萌系"},
        {"value": "shengui", "label": "神鬼"},
        {"value": "zhichang", "label": "职场"},
        {"value": "zhiyu", "label": "治愈"},
        {"value": "jiecao", "label": "节操"},
        {"value": "sige", "label": "四格"},
        {"value": "changtiao", "label": "長條"},
        {"value": "jianniang", "label": "舰娘"},
        {"value": "gaoxiao", "label": "搞笑"},
        {"value": "jingji", "label": "竞技"},
        {"value": "weiniang", "label": "伪娘"},
        {"value": "mohuan", "label": "魔幻"},
        {"value": "rexue", "label": "热血"},
        {"value": "xingzhuanhuan", "label": "性转换"},
        {"value": "meishi", "label": "美食"},
        {"value": "lizhi", "label": "励志"},
        {"value": "COLOR", "label": "彩色"},
        {"value": "hougong", "label": "後宮"},
        {"value": "zhentan", "label": "侦探"},
        {"value": "jingsong", "label": "惊悚"},
        {"value": "aa", "label": "AA"},
        {"value": "yinyuewudao", "label": "音乐舞蹈"},
        {"value": "yishijie", "label": "异世界"},
        {"value": "zhanzheng", "label": "战争"},
        {"value": "lishi", "label": "历史"},
        {"value": "jizhan", "label": "机战"},
        {"value": "dushi", "label": "都市"},
        {"value": "chuanyue", "label": "穿越"},
        {"value": "chongsheng", "label": "重生"},
        {"value": "kongbu", "label": "恐怖"},
        {"value": "shengcun", "label": "生存"},
        {"value": "wuxia", "label": "武侠"},
        {"value": "zhaixi", "label": "宅系"},
        {"value": "zhuansheng", "label": "转生"},
        {"value": "fate", "label": "FATE"},
        {"value": "Uncensored", "label": "無修正"},
        {"value": "xianxia", "label": "仙侠"},
        {"value": "loveLive", "label": "LoveLive"}
      ]
    }
  },

  "errorHandling": {
    "retry": {
      "enabled": true,
      "maxAttempts": 3,
      "strategy": "exponential",
      "baseDelay": 2000,
      "maxDelay": 10000,
      "retryOn": {
        "statusCodes": [408, 429, 500, 502, 503, 504],
        "errors": ["TIMEOUT", "NETWORK_ERROR", "ELEMENT_NOT_FOUND"]
      }
    },
    "fallback": {
      "enabled": true,
      "strategies": [
        {
          "type": "alternativeUrl",
          "url": "https://mapi.copy20.com"
        },
        {
          "type": "retry",
          "maxAttempts": 2
        }
      ]
    }
  },

  "notes": [
    "API版本 v3.1 - 基于Tachiyomi拷贝漫画扩展v1.4.78分析",
    "支持拷贝漫画域名: api.mangacopy.com, mapi.copy20.com, api.2025copy.com",
    "支持热辣漫画域名: mapi.hotmangasd.com, api.manga2025.com等",
    "域名切换: 在设置中选择API域名即可生效",
    "图片需要根据words数组索引进行排序",
    "请求头: Version=2025.11.21, Region=0, Webp=0",
    "本版本不支持登录功能"
  ]
}
